(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[231],{2998:function(e,t,r){Promise.resolve().then(r.bind(r,8005))},8676:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return a}});var s=r(7437),n=r(208);function a(){return(0,s.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,s.jsx)(n.nI,{src:"https://lottie.host/2dfe3f56-1676-472e-b1b8-bfa43b7faba8/ONbpoVclRb.lottie",loop:!0,autoplay:!0,style:{width:"150px",height:"150px"}})})}},8005:function(e,t,r){"use strict";r.r(t);var s=r(7437),n=r(2265),a=r(9376),i=r(4864),l=r(8676),o=r(4449);r(7648);var c=r(6770),u=r(1671),d=r(9388),f=r(3583),m=r(9453);t.default=()=>{let e=(0,a.useParams)(),t=(0,a.useRouter)(),{toast:r}=(0,c.pm)(),{userId:h}=(0,i.V)(),[x,p]=(0,n.useState)([]),[g,b]=(0,n.useState)(),[v,y]=(0,n.useState)(0),[j,N]=(0,n.useState)([]),[w,S]=(0,n.useState)(0),[z,E]=(0,n.useState)(0),[I,T]=(0,n.useState)(!0);(0,n.useEffect)(()=>{let e=e=>e.preventDefault(),t=e=>e.preventDefault();document.addEventListener("contextmenu",e),document.addEventListener("copy",t);let r=document.documentElement.style;return r.userSelect="none",()=>{document.removeEventListener("contextmenu",e),document.removeEventListener("copy",t),r.userSelect=""}},[]),(0,n.useEffect)(()=>{e&&(async()=>{try{let t=await fetch("/api/Quiz/getQuizStatus?courseId=".concat(e.courseId,"&userId=").concat(h));if(t.ok){if((await t.json()).quiz_attempted)b("attempted");else{b("home");let t=await fetch("/api/Quiz/getQuizes/?courseId=".concat(e.courseId,"/quiz"),{method:"POST"});if(t.ok){let e=(await t.json()).map(e=>({question:e.question_text,options:[e.choice_1,e.choice_2,e.choice_3,e.choice_4],correct:e.correct_choice-1}));p(e),N(Array(e.length).fill(null)),S(60*e.length)}else console.error("Failed to fetch questions")}}else console.error("Failed to fetch quiz status")}catch(e){console.error("Error fetching course data:",e)}finally{T(!1)}})()},[e,h]),(0,n.useEffect)(()=>{let e=()=>{document.fullscreenElement||"quiz"!==g||(r({variant:"failure",title:"Quiz",description:"Quiz ended as you exited fullscreen!"}),k())},t=()=>{"hidden"===document.visibilityState&&"quiz"===g&&(r({variant:"failure",title:"Quiz",description:"Quiz ended as you switched windows or tabs!"}),k())},s=()=>{"quiz"===g&&(r({variant:"failure",title:"Quiz",description:"Quiz ended as you switched windows!"}),k())};return document.addEventListener("fullscreenchange",e),document.addEventListener("visibilitychange",t),window.addEventListener("blur",s),()=>{document.removeEventListener("fullscreenchange",e),document.removeEventListener("visibilitychange",t),window.removeEventListener("blur",s)}},[g,j,x]),(0,n.useEffect)(()=>{if("quiz"===g&&0===w&&(r({variant:"failure",title:"Quiz",description:"Time's up!"}),k()),"quiz"===g){let e=setInterval(()=>S(e=>e-1),1e3);return()=>clearInterval(e)}},[w,g]);let k=async()=>{let t=j.reduce((e,t,r)=>{var s;return e+(t===(null===(s=x[r])||void 0===s?void 0:s.correct)?1:0)},0);E(t),b("results"),document.fullscreenElement&&document.exitFullscreen();let s={user_id:h,course_id:parseInt(e.courseId,10),total_score:t,is_passed:t>=Math.ceil(.6*x.length)};try{(await fetch("/api/Quiz/quizResults",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).ok?r({variant:"success",title:"Quiz",description:"Done! your quiz is submitted"}):r({variant:"failure",title:"Quiz",description:"Sorry! Quiz not submitted!"})}catch(e){console.error("Error submitting quiz results:",e),r({variant:"failure",title:"Quiz",description:"There was an issue submitting your results. Please try again."})}},_=e=>{let t=[...j];t[v]=e,N(t)};return I?(0,s.jsx)(l.default,{}):"home"===g?(0,s.jsxs)("div",{className:"flex flex-col items-center space-y-4 mt-10",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Welcome to the Quiz"}),(0,s.jsx)(o.z,{className:"bg-primary text-white py-2 px-4 rounded-lg hover:bg-primary-light",onClick:()=>{if(0===x.length){r({variant:"failure",title:"Quiz",description:"No questions available to start the quiz."});return}document.documentElement.requestFullscreen().then(()=>b("quiz")).catch(()=>r({variant:"failure",title:"Quiz",description:"Please allow fullscreen mode to proceed!"}))},children:"Start Test"})]}):"quiz"===g?(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Quiz"}),(0,s.jsx)("div",{className:"flex justify-center space-x-2 mb-4",children:x.map((e,t)=>(0,s.jsx)(o.z,{className:"py-2 px-4 rounded ".concat(v===t?"bg-blue-500 text-white":"bg-gray-200"),onClick:()=>y(t),children:t+1},t))}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-2",children:x[v].question}),x[v].options.map((e,t)=>(0,s.jsx)(o.z,{onClick:()=>_(t),className:"block w-full text-left py-2 px-4 rounded mb-2 ".concat(j[v]===t?"bg-primary text-white":"bg-gray-100 text-black"),children:e},t))]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)(o.z,{className:"bg-gray-500 text-black py-2 px-4 rounded hover:bg-gray-600",onClick:()=>y(e=>Math.max(e-1,0)),disabled:0===v,children:"Previous"}),(0,s.jsxs)("p",{className:"text-lg font-bold",children:["Time Remaining: ",Math.floor(w/60),":",String(w%60).padStart(2,"0")]}),(0,s.jsx)(o.z,{className:"bg-gray-500 text-black py-2 px-4 rounded hover:bg-gray-600",onClick:()=>y(e=>Math.min(e+1,x.length-1)),disabled:v===x.length-1,children:"Next"})]}),(0,s.jsx)(o.z,{className:"mt-4 bg-red-500 font-semibold text-white py-2 px-4 rounded hover:bg-red-600",onClick:k,children:"Submit"})]}):"attempted"===g?(0,s.jsxs)("div",{className:"flex flex-col items-center space-y-4 mt-10",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-primary",children:"Quiz Already Attempted"}),(0,s.jsx)("p",{className:"text-lg",children:"You have already submitted this quiz. Retaking is not allowed."}),(0,s.jsx)(o.z,{onClick:()=>t.replace("/courses/".concat(e.courseId)),children:"Back to Home"})]}):"results"===g?(0,s.jsxs)("div",{className:"container mx-auto p-6 max-w-3xl",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-primary mb-6",children:"Quiz Results"}),(0,s.jsxs)(f.Zb,{className:"mb-8",children:[(0,s.jsx)(f.Ol,{children:(0,s.jsx)(f.ll,{children:"Your Score"})}),(0,s.jsxs)(f.aY,{children:[(0,s.jsxs)("div",{className:"text-3xl font-bold mb-2",children:[z," / ",x.length]}),(0,s.jsx)(m.E,{value:z/x.length*100,className:"h-3 mb-2"}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["You got ",(z/x.length*100).toFixed(1),"% correct"]})]})]}),(0,s.jsx)("div",{className:"space-y-6",children:x.map((e,t)=>(0,s.jsxs)(f.Zb,{className:j[t]===e.correct?"border-green-500":"border-red-500",children:[(0,s.jsx)(f.Ol,{children:(0,s.jsxs)(f.ll,{className:"flex items-start gap-2",children:[j[t]===e.correct?(0,s.jsx)(u.Z,{className:"text-green-500 mt-1"}):(0,s.jsx)(d.Z,{className:"text-red-500 mt-1"}),(0,s.jsxs)("span",{children:["Q: ",e.question]})]})}),(0,s.jsx)(f.aY,{children:(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-semibold",children:"Your Answer: "}),(0,s.jsx)("span",{className:j[t]===e.correct?"text-green-600":"text-red-600",children:e.options[j[t]]||"Not Answered"})]}),j[t]!==e.correct&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-semibold",children:"Correct Answer: "}),(0,s.jsx)("span",{className:"text-green-600",children:e.options[e.correct]})]})]})})]},t))}),(0,s.jsx)(o.z,{className:"mt-5",onClick:()=>t.push("/courses/".concat(e.courseId)),children:"Return to Course"})]}):null}},4449:function(e,t,r){"use strict";r.d(t,{d:function(){return o},z:function(){return c}});var s=r(7437),n=r(2265),a=r(7053),i=r(535),l=r(6474);let o=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-white shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,t)=>{let{className:r,variant:n,size:i,asChild:c=!1,...u}=e,d=c?a.g7:"button";return(0,s.jsx)(d,{className:(0,l.cn)(o({variant:n,size:i,className:r})),ref:t,...u})});c.displayName="Button"},3583:function(e,t,r){"use strict";r.d(t,{Ol:function(){return l},SZ:function(){return c},Zb:function(){return i},aY:function(){return u},eW:function(){return d},ll:function(){return o}});var s=r(7437),n=r(2265),a=r(6474);let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("rounded-xl border bg-card text-card-foreground shadow",r),...n})});i.displayName="Card";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...n})});l.displayName="CardHeader";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("h3",{ref:t,className:(0,a.cn)("font-semibold leading-none tracking-tight",r),...n})});o.displayName="CardTitle";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("p",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",r),...n})});c.displayName="CardDescription";let u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...n})});u.displayName="CardContent";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...n})});d.displayName="CardFooter"},9453:function(e,t,r){"use strict";r.d(t,{E:function(){return l}});var s=r(7437),n=r(2265),a=r(4447),i=r(6474);let l=n.forwardRef((e,t)=>{let{className:r,value:n,...l}=e;return(0,s.jsx)(a.fC,{ref:t,className:(0,i.cn)("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",r),...l,children:(0,s.jsx)(a.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(n||0),"%)")}})})});l.displayName=a.fC.displayName},6770:function(e,t,r){"use strict";r.d(t,{pm:function(){return f}});var s=r(2265);let n=0,a=new Map,i=e=>{if(a.has(e))return;let t=setTimeout(()=>{a.delete(e),u({type:"REMOVE_TOAST",toastId:e})},1e6);a.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?i(r):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],c={toasts:[]};function u(e){c=l(c,e),o.forEach(e=>{e(c)})}function d(e){let{...t}=e,r=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>u({type:"DISMISS_TOAST",toastId:r});return u({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||s()}}}),{id:r,dismiss:s,update:e=>u({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function f(){let[e,t]=s.useState(c);return s.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:d,dismiss:e=>u({type:"DISMISS_TOAST",toastId:e})}}},7645:function(e,t,r){"use strict";r.d(t,{hJ:function(){return s.hJ},ET:function(){return n.ET},I8:function(){return i},DI:function(){return n.hJ},Xb:function(){return s.Xb},db:function(){return l},Aj:function(){return s.Aj},cf:function(){return n.cf},Xo:function(){return n.Xo},IO:function(){return n.IO},LS:function(){return s.LS},e5:function(){return s.e5},rh:function(){return s.rh},w7:function(){return s.w7}});var s=r(4752),n=r(5978);let a=(0,r(738).ZF)({apiKey:"AIzaSyDrzFNmxdmIfVN2bqi9mp2g6vaz71AfEFE",authDomain:"axial-radius-436608-q6.firebaseapp.com",databaseURL:"https://axial-radius-436608-q6-default-rtdb.firebaseio.com",projectId:"axial-radius-436608-q6",storageBucket:"axial-radius-436608-q6.appspot.com",messagingSenderId:"128899871237",appId:"1:128899871237:web:30ded11d2a1dd26627226c",measurementId:"G-8W9YR4NBKP"}),i=(0,s.v0)(a),l=(0,n.ad)(a)},6474:function(e,t,r){"use strict";r.d(t,{cn:function(){return a}});var s=r(1994),n=r(3335);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,s.W)(t))}},4864:function(e,t,r){"use strict";r.d(t,{V:function(){return l}});var s=r(7437),n=r(2265),a=r(7645);let i=(0,n.createContext)({userName:null,isLogged:!1,loading:!0,role:null,userId:null,email:null,accessToken:null,address:null}),l=()=>(0,n.useContext)(i);t.default=e=>{let{children:t}=e,[r,l]=(0,n.useState)(null),[o,c]=(0,n.useState)(null),[u,d]=(0,n.useState)(null),[f,m]=(0,n.useState)(!1),[h,x]=(0,n.useState)(!0),[p,g]=(0,n.useState)(null),[b,v]=(0,n.useState)(null),[y,j]=(0,n.useState)(null),N=async e=>{try{let t=await fetch("/api/getUser?userEmail=".concat(e),{method:"GET"});if(t.ok){let e=await t.json();v(e.id),g(e.role),d(e.email),l(e.name),c(e.address)}else console.error("Error fetching role:",t.statusText)}catch(e){console.error("Error in getUser:",e.message)}},w=async()=>{try{await (0,a.w7)(a.I8),m(!1),l(null),d(null),g(null),v(null),c(null),console.log("User logged out")}catch(e){console.error("Error logging out:",e)}};return(0,n.useEffect)(()=>{let e=(0,a.Aj)(a.I8,e=>{e?(j(e.getIdToken()),m(!0),N(e.email)):m(!1),x(!1)});return()=>e()},[]),(0,s.jsx)(i.Provider,{value:{userName:r,email:u,isLogged:f,address:o,loading:h,role:p,logout:w,userId:b,accessToken:y},children:t})}}},function(e){e.O(0,[4358,4533,2486,5434,9851,2972,4365,2971,2117,1744],function(){return e(e.s=2998)}),_N_E=e.O()}]);