(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[408],{3813:function(e,t,a){Promise.resolve().then(a.bind(a,3361))},3361:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return d}});var s=a(7437),r=a(2265),n=a(4449),o=a(2025),l=a(9376),c=a(8264),i=a(6770);function d(){let{toast:e}=(0,i.pm)(),{assignments:t,courseId:a}=(0,l.useParams)(),d=t.split("-")[0],u=t.split("-")[1],[f,m]=(0,r.useState)([]),[p,h]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{let t=localStorage.getItem("accessToken");try{let a=await fetch("/api/Classroom/getGradesClassroom?accessToken=".concat(t,"&courseId=").concat(d,"&courseWorkId=").concat(u),{method:"GET",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}}),s=await a.json();a.ok?m(s.submissions):e({variant:"failure",title:"SkyLearn",description:"Sorry! Failed to fetch student grades"})}catch(t){console.error("Error fetching student data:",t),e({variant:"failure",title:"SkyLearn",description:"Error fetching student grades: ".concat(t)})}finally{h(!1)}})()},[t]);let x=async()=>{for(let t of f){let s=t.studentEmail,r=t.grade;try{let t=await fetch("/api/getUser?userEmail=".concat(encodeURIComponent(s)),{method:"GET"}),n=await t.json();t.ok&&n.id?(async()=>{let t=await fetch("/api/updateLeaderboard",{method:"PUT",body:JSON.stringify({studentId:n.id,courseId:a,Score:r}),headers:{"Content-Type":"application/json"}});if(t.ok)e({variant:"success",title:"SkyLearn",description:"Leaderboard updated successfully!"});else{let a=await t.json();e({variant:"failure",title:"SkyLearn",description:"Error: ".concat(a.message)})}})():console.error("Error fetching student ID for ".concat(s))}catch(e){console.error("Error fetching user data:",e)}}};return p?(0,s.jsx)("div",{className:"container mx-auto p-6 max-w-4xl",children:(0,s.jsx)("div",{className:"bg-card rounded-lg shadow-lg p-6",children:(0,s.jsx)("p",{children:"Loading student data..."})})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.Z,{}),(0,s.jsx)("div",{className:"container mx-auto p-6 max-w-4xl",children:(0,s.jsxs)("div",{className:"bg-card rounded-lg shadow-lg p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold text-card-foreground",children:"Student Marks"}),(0,s.jsx)(n.z,{onClick:x,className:"bg-primary hover:bg-primary/90",children:"Submit All Marks"})]}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)(o.iA,{children:[(0,s.jsx)(o.xD,{children:(0,s.jsxs)(o.SC,{children:[(0,s.jsx)(o.ss,{className:"w-[100px]",children:"S.No"}),(0,s.jsx)(o.ss,{children:"Student Name"}),(0,s.jsx)(o.ss,{children:"Student Email"}),(0,s.jsx)(o.ss,{className:"w-[150px]",children:"Marks Scored"})]})}),(0,s.jsx)(o.RM,{children:f&&f.length>0?f.map((e,t)=>(0,s.jsxs)(o.SC,{children:[(0,s.jsx)(o.pj,{className:"font-medium",children:t+1}),(0,s.jsx)(o.pj,{children:e.studentName}),(0,s.jsx)(o.pj,{children:e.studentEmail}),(0,s.jsx)(o.pj,{children:e.grade})]},e.studentEmail)):(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:"4",className:"text-center",children:"No students available"})})})]})})]})})]})}},2025:function(e,t,a){"use strict";a.d(t,{RM:function(){return c},Rn:function(){return f},SC:function(){return i},iA:function(){return o},pj:function(){return u},ss:function(){return d},xD:function(){return l}});var s=a(7437),r=a(2265),n=a(6474);let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:t,className:(0,n.cn)("w-full caption-bottom text-sm",a),...r})})});o.displayName="Table";let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("thead",{ref:t,className:(0,n.cn)("[&_tr]:border-b",a),...r})});l.displayName="TableHeader";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("tbody",{ref:t,className:(0,n.cn)("[&_tr:last-child]:border-0",a),...r})});c.displayName="TableBody",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("tfoot",{ref:t,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...r})}).displayName="TableFooter";let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("tr",{ref:t,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...r})});i.displayName="TableRow";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("th",{ref:t,className:(0,n.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...r})});d.displayName="TableHead";let u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("td",{ref:t,className:(0,n.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...r})});u.displayName="TableCell";let f=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("caption",{ref:t,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",a),...r})});f.displayName="TableCaption"},6770:function(e,t,a){"use strict";a.d(t,{pm:function(){return f}});var s=a(2265);let r=0,n=new Map,o=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?o(a):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],i={toasts:[]};function d(e){i=l(i,e),c.forEach(e=>{e(i)})}function u(e){let{...t}=e,a=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>d({type:"DISMISS_TOAST",toastId:a});return d({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||s()}}}),{id:a,dismiss:s,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function f(){let[e,t]=s.useState(i);return s.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}}},function(e){e.O(0,[4358,4533,8310,5434,9851,9754,7531,3839,8264,2971,2117,1744],function(){return e(e.s=3813)}),_N_E=e.O()}]);