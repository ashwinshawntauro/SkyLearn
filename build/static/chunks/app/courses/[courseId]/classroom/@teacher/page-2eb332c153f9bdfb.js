(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2907],{48:function(e,t,s){Promise.resolve().then(s.bind(s,3336))},9205:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(2265);let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),o=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&s.indexOf(e)===t).join(" ")};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,a.forwardRef)((e,t)=>{let{color:s="currentColor",size:r=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:c="",children:d,iconNode:u,...m}=e;return(0,a.createElement)("svg",{ref:t,...n,width:r,height:r,stroke:s,strokeWidth:i?24*Number(l)/Number(r):l,className:o("lucide",c),...m},[...u.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(d)?d:[d]])}),i=(e,t)=>{let s=(0,a.forwardRef)((s,n)=>{let{className:i,...c}=s;return(0,a.createElement)(l,{ref:n,iconNode:t,className:o("lucide-".concat(r(e)),i),...c})});return s.displayName="".concat(e),s}},3336:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return v}});var a=s(7437),r=s(2265),o=s(9205);let n=(0,o.Z)("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),l=(0,o.Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),i=(0,o.Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),c=(0,o.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var d=s(4449),u=s(322),m=s(1670),f=s(6770),p=s(3583),h=s(1298),x=s(8264),g=s(9376),y=s(9453),w=s(4864),j=s(8072),N=s(798);function v(){var e;let t=(0,g.usePathname)(),{toast:s}=(0,f.pm)(),{loading:o}=(0,w.V)(),[v,b]=(0,r.useState)(!1),C=null===(e=t.split("/courses/")[1])||void 0===e?void 0:e.split("/")[0],[k,S]=(0,r.useState)(null),[T,_]=(0,r.useState)([]),[A,O]=(0,r.useState)(!1),[I,E]=(0,r.useState)(),[D,P]=(0,r.useState)({title:"",description:"",maxPoints:100,dueDate:new Date}),R=localStorage.getItem("accessToken"),[L,M]=(0,r.useState)(0);(0,r.useEffect)(()=>{C&&((async()=>{try{let e=await fetch("/api/Course/getCourses/?courseId=".concat(C),{method:"POST"});if(!e.ok)throw Error("Course not found");let t=await e.json();S(t),E(t.googleClassroomJoinLink)}catch(e){console.error("Error fetching course data:",e)}})(),Z())},[C]),o&&j.default;let Z=async()=>{try{let e=await fetch("/api/Assignments/getAssignments?courseId=".concat(C));if(!e.ok)throw Error("Failed to fetch assignments");let t=await e.json();_(t)}catch(e){setError(e.message)}},z=async()=>{await localStorage.setItem("course_redirect",C);let e="https://accounts.google.com/o/oauth2/v2/auth?response_type=token&client_id=128899871237-aip8s1bp02dd3bhtc77q38eo3hidlhjj.apps.googleusercontent.com&redirect_uri=http://localhost:3000/authToken&scope=".concat(encodeURIComponent("https://www.googleapis.com/auth/classroom.student-submissions.me.readonly https://www.googleapis.com/auth/classroom.coursework.me.readonly https://www.googleapis.com/auth/classroom.courses https://www.googleapis.com/auth/classroom.student-submissions.students.readonly https://www.googleapis.com/auth/classroom.coursework.students.readonly https://www.googleapis.com/auth/classroom.coursework.students https://www.googleapis.com/auth/classroom.coursework.me https://www.googleapis.com/auth/classroom.rosters https://www.googleapis.com/auth/classroom.rosters.readonly https://www.googleapis.com/auth/classroom.profile.emails https://www.googleapis.com/auth/classroom.profile.photos"),"&prompt=select_account");window.location.href=e},V=async(e,t)=>{try{console.log(t),(await fetch("/api/Classroom/updateClassroomSharing",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({courseId:e,googleClassroomShare:t})})).ok&&s({variant:"success",title:"SkyLearn",description:"Course updated !"})}catch(e){console.log(e),s({variant:"failure",title:"SkyLearn",description:"Sorry! Couldnt update the course"})}},G=(e,t,s)=>{e(e=>({...e,[t]:s}))},q=e=>{let t=e.target.value;P(e=>({...e,dueDate:t}))},F=async(e,t,a,r)=>{let o=new Date(r).getFullYear(),n=new Date(r).getMonth()+1,l=new Date(r).getDate();console.log(r),console.log(o,n,l);try{let r=await fetch("/api/Assignments/addAssignment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accessToken:localStorage.getItem("accessToken"),classroomId:k.googleClassroomId,title:e,description:t,maxPoints:a||100,dueDate:{year:o,month:n,day:l},courseId:C})});r.ok?(O(!1),Z(),s({variant:"success",title:"SkyLearn",description:"Assignment created Successfully !"})):(await r.json(),s({variant:"failure",title:"SkyLearn",description:"Please Grant Permission"}))}catch(e){console.error("Network error:",e),s({variant:"failure",title:"SkyLearn",description:"Sorry! Could not create the assignment"})}},Y=async e=>{b(!0);try{let t=await fetch("/api/Classroom/createClassroom",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(R)},body:JSON.stringify({accessToken:R,name:e.course_name,section:e.course_description,descriptionHeading:e.course_name,description:e.course_desc,room:String(e.course_id)})});if(t.ok)t.ok&&M(50);else{await t.json(),s({variant:"failure",title:"SkyLearn",description:"Click at Grant Permission"});return}let a=await t.json(),r=a.id,o=a.alternateLink;$(e,r,o),s({variant:"success",title:"SkyLearn",description:"Yes! Course created in Google Classroom"})}catch(e){console.error("Error creating Google Classroom course:",e),s({variant:"success",title:"SkyLearn",description:"Sorry! Error creating course in Google Classroom"})}},$=async(e,t,a)=>{try{(await fetch("/api/Classroom/updateClassroom",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({courseId:e.course_id,googleClassroomId:t,googleClassroomLink:a})})).ok?M(100):s({variant:"failure",title:"SkyLearn",description:"Sorry! Failed to update course with classroom details"}),b(!1)}catch(e){console.log(e)}b(0)};return(0,a.jsx)("div",{className:"flex h-screen bg-gray-100",children:(0,a.jsxs)("div",{className:"flex-1 overflow-auto",children:[(0,a.jsx)(x.Z,{}),(0,a.jsxs)("div",{className:"bg-primary p-4 w-full text-white",children:[o&&(0,a.jsxs)("div",{className:"w-1/2 m-auto",children:[(0,a.jsx)(N.O,{className:"h-6 bg-gray-400 w-3/4 mx-auto mb-2"}),(0,a.jsx)(N.O,{className:"h-4 bg-gray-400 w-1/2 mx-auto mb-4"}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)(N.O,{className:"h-4 bg-gray-400 w-1/4"}),(0,a.jsx)(N.O,{className:"h-4 bg-gray-400 w-1/4"})]})]}),k&&(0,a.jsxs)("div",{className:"w-1/2 m-auto",children:[(0,a.jsx)("h2",{className:"text-lg flex justify-center font-semibold mb-2",children:k.course_name||"None"}),(0,a.jsx)("p",{className:"mb-4 flex justify-center",children:k.course_description||"None"}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsxs)("span",{children:[(0,a.jsx)("strong",{children:"Enrolled:"})," ",k.course_enrolments||0]}),(0,a.jsxs)("span",{children:[(0,a.jsx)("strong",{children:"Difficulty:"})," ",k.difficulty]})]})]})]}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"w-full flex justify-between mb-2",children:[(0,a.jsx)(d.z,{onClick:()=>Y(k),children:"Create Classroom"}),(0,a.jsx)(d.z,{onClick:z,children:"Grant Permission"})]}),(0,a.jsx)(h.Vq,{open:v,children:(0,a.jsxs)(h.cZ,{children:[(0,a.jsx)(h.fK,{children:(0,a.jsx)(h.$N,{children:"Processing"})}),(0,a.jsxs)("div",{className:"flex items-center justify-center flex-col gap-4",children:[(0,a.jsx)(y.E,{value:L,className:"w-full"}),(0,a.jsx)("p",{children:"Creating classroom, please wait..."})]})]})}),(0,a.jsx)(p.Zb,{className:"flex mb-2 h-16 items-center",children:(0,a.jsxs)(p.Ol,{className:"flex flex-row items-center justify-between w-full space-y-0",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(n,{className:"h-6 w-6 text-primary"}),(0,a.jsx)(p.ll,{className:"text-lg font-bold",children:"Sharable Code"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(u.I,{className:"w-64",placeholder:"Enter code",value:I,onChange:e=>{E(e.target.value)}}),(0,a.jsx)(d.z,{variant:"outline",className:"h-8 w-8 p-0 flex justify-center items-center",onClick:()=>V(C,I),children:(0,a.jsx)(l,{className:"h-4 w-4"})})]})]})}),(0,a.jsx)("div",{children:(0,a.jsxs)(p.Zb,{className:"p-4 shadow-md",children:[(0,a.jsxs)(p.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsxs)(p.ll,{className:"text-lg font-bold flex items-center",children:[(0,a.jsx)(i,{className:"mr-2 h-6 w-6 text-blue-500"}),"Assignments"]}),(0,a.jsxs)(h.Vq,{open:A,onOpenChange:O,children:[(0,a.jsx)(h.hg,{asChild:!0,children:(0,a.jsxs)(d.z,{variant:"outline","aria-label":"Create New Assignment",children:[(0,a.jsx)(c,{className:"h-4 w-4 mr-2"}),"New Assignment"]})}),(0,a.jsxs)(h.cZ,{children:[(0,a.jsx)(h.fK,{children:(0,a.jsx)(h.$N,{children:"Create New Assignment"})}),(0,a.jsxs)("div",{className:"grid gap-2 py-4",children:[(0,a.jsx)(u.I,{placeholder:"Assignment Title",value:D.title,onChange:async e=>G(P,"title",e.target.value)}),(0,a.jsx)(u.I,{placeholder:"Assignment Points",value:D.maxPoints,onChange:async e=>G(P,"maxPoints",e.target.value)}),(0,a.jsx)(m.g,{placeholder:"Assignment Description",value:D.description,onChange:async e=>G(P,"description",e.target.value)}),(0,a.jsx)(u.I,{type:"date",value:D.dueDate,onChange:e=>q(e)}),(0,a.jsx)(d.z,{onClick:()=>F(D.title,D.description,D.maxPoints,D.dueDate),children:"Create Assignment"})]})]})]})]}),(0,a.jsx)(p.aY,{children:(0,a.jsx)("div",{className:"gap-3 grid grid-cols-3",children:T.map(e=>(0,a.jsxs)("div",{className:"bg-white p-4 rounded-sm border transition-all duration-300",children:[(0,a.jsx)("h3",{className:"text-md font-semibold text-primary mb-2",children:e.title}),(0,a.jsx)("p",{className:"text-gray-700 text-sm mb-4",children:e.description}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 mb-4",children:["Due Date: ",e.due_date]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)("button",{className:"px-4 text-sm py-2 bg-primary text-white rounded-md hover:bg-primary-light transition-all duration-300",onClick:()=>window.location.href="/courses/".concat(C,"/classroom/").concat(k.googleClassroomId,"-").concat(e.courseWorkId),children:"View Grades"})})]},e.assignment_id))})})]})})]})]})})}},8072:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return o}});var a=s(7437),r=s(208);function o(){return(0,a.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,a.jsx)(r.nI,{src:"https://lottie.host/2dfe3f56-1676-472e-b1b8-bfa43b7faba8/ONbpoVclRb.lottie",loop:!0,autoplay:!0,style:{width:"150px",height:"150px"}})})}},3583:function(e,t,s){"use strict";s.d(t,{Ol:function(){return l},SZ:function(){return c},Zb:function(){return n},aY:function(){return d},eW:function(){return u},ll:function(){return i}});var a=s(7437),r=s(2265),o=s(6474);let n=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("rounded-xl border bg-card text-card-foreground shadow",s),...r})});n.displayName="Card";let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",s),...r})});l.displayName="CardHeader";let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h3",{ref:t,className:(0,o.cn)("font-semibold leading-none tracking-tight",s),...r})});i.displayName="CardTitle";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("p",{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",s),...r})});c.displayName="CardDescription";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("p-6 pt-0",s),...r})});d.displayName="CardContent";let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("flex items-center p-6 pt-0",s),...r})});u.displayName="CardFooter"},1298:function(e,t,s){"use strict";s.d(t,{$N:function(){return h},Be:function(){return x},Vq:function(){return i},cN:function(){return p},cZ:function(){return m},fK:function(){return f},hg:function(){return c}});var a=s(7437),r=s(2265),o=s(9027),n=s(6474),l=s(653);let i=o.fC,c=o.xz,d=o.h_;o.x8;let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(o.aV,{ref:t,className:(0,n.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r})});u.displayName=o.aV.displayName;let m=r.forwardRef((e,t)=>{let{className:s,children:r,...i}=e;return(0,a.jsxs)(d,{children:[(0,a.jsx)(u,{}),(0,a.jsxs)(o.VY,{ref:t,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...i,children:[r,(0,a.jsxs)(o.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(l.Pxu,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=o.VY.displayName;let f=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};f.displayName="DialogHeader";let p=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};p.displayName="DialogFooter";let h=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(o.Dx,{ref:t,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",s),...r})});h.displayName=o.Dx.displayName;let x=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(o.dk,{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...r})});x.displayName=o.dk.displayName},9453:function(e,t,s){"use strict";s.d(t,{E:function(){return l}});var a=s(7437),r=s(2265),o=s(4447),n=s(6474);let l=r.forwardRef((e,t)=>{let{className:s,value:r,...l}=e;return(0,a.jsx)(o.fC,{ref:t,className:(0,n.cn)("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",s),...l,children:(0,a.jsx)(o.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});l.displayName=o.fC.displayName},798:function(e,t,s){"use strict";s.d(t,{O:function(){return o}});var a=s(7437),r=s(6474);function o(e){let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,r.cn)("animate-pulse rounded-md bg-primary/10",t),...s})}},1670:function(e,t,s){"use strict";s.d(t,{g:function(){return n}});var a=s(7437),r=s(2265),o=s(6474);let n=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("textarea",{className:(0,o.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...r})});n.displayName="Textarea"},6770:function(e,t,s){"use strict";s.d(t,{pm:function(){return m}});var a=s(2265);let r=0,o=new Map,n=e=>{if(o.has(e))return;let t=setTimeout(()=>{o.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);o.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?n(s):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},i=[],c={toasts:[]};function d(e){c=l(c,e),i.forEach(e=>{e(c)})}function u(e){let{...t}=e,s=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>d({type:"DISMISS_TOAST",toastId:s});return d({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=a.useState(c);return a.useEffect(()=>(i.push(t),()=>{let e=i.indexOf(t);e>-1&&i.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}}},function(e){e.O(0,[4358,4533,2486,8310,5434,9851,9754,7531,3839,1178,8264,2971,2117,1744],function(){return e(e.s=48)}),_N_E=e.O()}]);